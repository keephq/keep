filebeat.inputs:
  - type: filestream
    id: docker-containers
    enabled: true
    paths:
      - /var/lib/docker/containers/*/*.log

processors:
  - add_docker_metadata:
      host: "unix:///var/run/docker.sock"

  # Keep ONLY keep-backend-elk logs.
  # Primary: docker-compose service label
  # Fallback: container name contains keep-backend-elk
  - drop_event:
      when:
        not:
          or:
            - equals:
                docker.container.labels.com_docker_compose_service: "keep-backend-elk"
            - contains:
                docker.container.name: "keep-backend-elk"

output.logstash:
  hosts: ["${LOGSTASH_HOST:logstash}:${LOGSTASH_PORT:5044}"]

logging.level: info
logging.to_files: false
monitoring.enabled: false