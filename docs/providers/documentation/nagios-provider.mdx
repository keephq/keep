---
title: "Nagios Provider"
sidebarTitle: "Nagios"
description: "The Nagios Provider allows reception of push alerts from Nagios to Keep using Event Handlers."
---
import AutoGeneratedSnippet from '/snippets/providers/nagios-snippet-autogenerated.mdx';

<AutoGeneratedSnippet />

import ProviderLogo from '@components/ProviderLogo';
import TableWrapper from "@components/TableWrapper";

<ProviderLogo src="/icons/nagios-icon.png" alt="Nagios Logo" />

# Nagios Provider

The Nagios provider uses Nagios's Event Handler system to push alerts to a Keep webhook endpoint.

## Setup

You will need access to your Nagios server's configuration files.

### Nagios Configuration

#### 1. Enable Event Handlers

Ensure event handlers are enabled globally in your main Nagios configuration file (`nagios.cfg`).

```ini
# /usr/local/nagios/etc/nagios.cfg
enable_event_handlers=1
```

#### 2. Define Event Handler Commands

Define commands in your `commands.cfg` file. These commands will use `curl` to send alert data to the Keep webhook URL.
You will get the specific webhook URL from Keep's UI when you add the Nagios provider.

Add command definitions to `/usr/local/nagios/etc/objects/commands.cfg` as follows:

```
# Command to notify Keep about service alerts
define command{
    command_name    notify-keep-service
    command_line    /usr/bin/printf "{\"host_name\":\"$HOSTNAME$\",\"service_description\":\"$SERVICEDESC$\",\"service_state\":\"$SERVICESTATE$\",\"timestamp\":\"`date -u +%Y-%m-%dT%H:%M:%SZ`\",\"output\":\"$SERVICEOUTPUT$\"}" | /usr/bin/curl -X POST -H 'Content-Type: application/json' -d @- <YOUR_KEEP_WEBHOOK_URL>
}

# Command to notify Keep about host alerts
define command{
    command_name    notify-keep-host
    command_line    /usr/bin/printf "{\"host_name\":\"$HOSTNAME$\",\"host_state\":\"$HOSTSTATE$\",\"timestamp\":\"`date -u +%Y-%m-%dT%H:%M:%SZ`\",\"output\":\"$HOSTOUTPUT$\"}" | /usr/bin/curl -X POST -H 'Content-Type: application/json' -d @- <YOUR_KEEP_WEBHOOK_URL>
}
```
**Note:** Replace `<YOUR_KEEP_WEBHOOK_URL>` with actual URL provided by Keep.

#### 3. Assign Event Handlers to Services and Hosts

Assign appropriate event handler to services and hosts you want to monitor with Keep;

**For a service:-**
```
define service{
    use                             local-service
    host_name                       localhost
    service_description             PING
    check_command                   check_ping!100.0,20%!500.0,60%
    event_handler                   notify-keep-service  # <--- Add this line
}
```

**For a host:-**
```
define host{
    use             linux-server
    host_name       my-server
    alias           My Test Server
    address         127.0.0.1
    event_handler   notify-keep-host  # <--- Add this line
}
```