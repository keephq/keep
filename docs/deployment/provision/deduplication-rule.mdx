---
title: "Deduplication rules Provisioning (BETA)"
---

<Tip>For any questions or issues related to deduplication rules provisioning, please join our [Slack](https://slack.keephq.dev) community.</Tip>

Deduplication rules provisioning in Keep allows you to set up and manage deduplication rules dynamically. This feature enables you to configure deduplication rules during the deployment process.

### Configuring Deduplication rules

To provision deduplication rules, set the `KEEP_DEDUPLICATION_RULES` environment variable. This can be done in two ways:
1. Directly with a JSON string containing the deduplication rules configurations.
2. With the path to a JSON file that contains the deduplication rules.

The JSON schema for deduplication rules is as follows:

```json
[
    {
        "name": "deduplication rule name example 1", // unique name of provisioned rule
        "description": "deduplication rule name example 2",
        "provider_id": "a1b2c3d4e5f67890abcdef1234567890", // existing provider id for wich this rule will apply
        "provider_type": "grafana", // provider type of specified existing provider id
        "fingerprint_fields": ["fingerprint", "source", "service"], // list of fingerprint fields
        "full_deduplication": true, // whether full or partial deduplication should be used
        "ignore_fields": ["name", "lastReceived"] // not needed if full_deduplication is false
    },
    {
        "name": "deduplication rule name example 2",
        "description": "deduplication rule name example 2",
        "provider_id": "edc4d65d53204cefb511321be98f748e",
        "provider_type": "prometheus",
        "fingerprint_fields": ["fingerprint", "source", "service"],
        "full_deduplication": false,
    },
]
```

### Deduplication rules Provisioning behavior
1. Keep synchronizes its internal deduplication rules state with the deduplication rules specified in the `KEEP_DEDUPLICATION_RULES` environment variable.
2. Keep determines which deduplication rules to create, update, or delete based on the names of the deduplication rules in the `KEEP_DEDUPLICATION_RULES` environment variable.
3. Keep prevents changes to provisioned deduplication rules through the Keep UI.
4. Keep prevents the deletion of provisioned deduplication rules through the Keep UI.
